"use strict";(()=>{var e={};e.id=220,e.ids=[220],e.modules={1649:e=>{e.exports=require("next-auth/react")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4520:e=>{e.exports=import("@vercel/analytics/next")},9500:e=>{e.exports=import("firebase/analytics")},3745:e=>{e.exports=import("firebase/app")},1492:e=>{e.exports=import("firebase/firestore")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},9434:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>u,default:()=>c,routeModule:()=>l});var s=a(1802),i=a(7153),n=a(6249),o=a(2715),d=e([o]);o=(d.then?(await d)():d)[0];let c=(0,n.l)(o,"default"),u=(0,n.l)(o,"config"),l=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/consultations",pathname:"/api/consultations",bundlePath:"",filename:""},userland:o});r()}catch(e){r(e)}})},2715:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>d});var s=a(6453),i=a(1492),n=a(1649),o=e([s,i]);async function d(e,t){let a=await (0,n.getSession)({req:e});if(!a||!a.user)return t.status(401).json({message:"No autorizado"});if("POST"===e.method)try{let{serviceType:r,address:n,postalCode:o,projectTypes:d,startDate:c,installations:u,budget:l,supportLevel:p,name:f,organization:m,email:P,phone:y}=e.body,g=(0,i.collection)(s.db,"consultations"),A=await (0,i.addDoc)(g,{client_id:a.user.email,service_type:r,location:n,postal_code:o,project_types:JSON.stringify(d),start_date:c,installations:u,budget:l,support_level:p,contact_name:f,organization:m,email:P,phone:y,status:"pending"});t.status(201).json({message:"Consulta creada exitosamente",id:A.id})}catch(e){console.error("Error al crear la consulta:",e),t.status(500).json({message:"Error interno del servidor"})}else t.setHeader("Allow",["POST"]),t.status(405).end(`M\xe9todo ${e.method} No Permitido`)}[s,i]=o.then?(await o)():o,r()}catch(e){r(e)}})},6453:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.d(t,{db:()=>u});var s=a(3745),i=a(1492),n=a(4520),o=a(9500),d=e([s,i,n,o]);[s,i,n,o]=d.then?(await d)():d;let c=(0,s.initializeApp)({apiKey:"AIzaSyAiP6h7YE866jxbRnrG4yG44v_zCVZRnqU",authDomain:"sifygsa-2dd04.firebaseapp.com",projectId:"sifygsa-2dd04",storageBucket:"sifygsa-2dd04.firebasestorage.app",messagingSenderId:"526441735975",appId:"1:526441735975:web:675b9208154cfb2d01ab02",measurementId:"G-W0QFY3QBN1"}),u=(0,i.getFirestore)(c);(0,o.getAnalytics)(c),r()}catch(e){r(e)}})},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=9434);module.exports=a})();